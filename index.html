<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" type="text/css" href="d3_json_styles.css" />
    <meta http-equiv="Cache-Control" content="no-store" />
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="http://d3js.org/topojson.v1.min.js"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/spin.js/2.0.1/spin.min.js'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.js"></script>
  </head>
  <body>
    <div id="embed">
      <h1>Alright Fine </h1>
      <button id="zoom_in">+</button>
      <button id="zoom_out">-</button>
      <div id="the_map"><img id="loading" src="https://upload.wikimedia.org/wikipedia/commons/b/b1/Loading_icon.gif"></div>
      <div id="legend"></div>
      <div id="tooltip3"></div>
    </div>

    <script src="csvTransformer.js"></script>
    <script src="colorScaleBuilder.js"></script>
    <script src="legendBuilder.js"></script>

    <script src="zooming.js"></script>
    <script src="d3_map_setup.js"></script>
    <script src="loadJSON.js"></script>
    <script src="json_to_map.js"></script>
    <script src="alterAndMapJson.js"></script>
    <script type="text/javascript">
    var xhr = new XMLHttpRequest();
      xhr.onreadystatechange = function() {
          if (xhr.readyState == XMLHttpRequest.DONE) {
            // debugger;
            console.log(xhr.responseText.countyData)
              var countyObject = JSON.parse(xhr.responseText).countyData;
              var title = JSON.parse(xhr.responseText).title;

              alterAndMapJson(countyObject, 'red', title)


          }
      }
      xhr.open('GET', 'https://countymapper.herokuapp.com/map/'+window.location.href.split("?")[1], true);
      xhr.send(null);


      // document.getElementById('fileinput').addEventListener('change', csvTransformer, false);
    </script>
  </body>
</html>
